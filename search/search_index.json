{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"PyPMXVMD Documentation","text":"<p>Welcome to the PyPMXVMD documentation site.</p> <ul> <li>API (English): API.md</li> <li>API (Chinese): API_CN.md</li> </ul>"},{"location":"API/","title":"PyPMXVMD API Documentation","text":"<p>PyPMXVMD is a Python library for parsing and modifying MikuMikuDance (MMD) files.</p> <p>Version: 2.7.1</p> <p>Python: &gt;= 3.8</p> <p>Acceleration: Optional Cython fast path for parsing and binary I/O with automatic fallback.</p>"},{"location":"API/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Quick Start</li> <li>Top-Level API</li> <li>Data Models</li> <li>VMD Models</li> <li>PMX Models</li> <li>VPD Models</li> <li>Parsers</li> <li>Enums</li> <li>Examples</li> <li>Error Handling</li> <li>Compatibility</li> <li>License</li> </ul>"},{"location":"API/#quick-start","title":"Quick Start","text":""},{"location":"API/#install","title":"Install","text":"<pre><code>pip install pypmxvmd\n</code></pre>"},{"location":"API/#basic-usage","title":"Basic Usage","text":"<pre><code>import pypmxvmd\n\n# Auto-detect file type and load\nmodel = pypmxvmd.load(\"model.pmx\")\n\n# Save\npypmxvmd.save(model, \"output.pmx\")\n</code></pre>"},{"location":"API/#top-level-api","title":"Top-Level API","text":"<p>PyPMXVMD provides concise top-level helpers for loading and saving files.</p>"},{"location":"API/#binary-files","title":"Binary Files","text":""},{"location":"API/#pypmxvmdloadfile_path-more_infofalse","title":"<code>pypmxvmd.load(file_path, more_info=False)</code>","text":"<p>Auto-detect the file type and load it.</p> <p>Args: - <code>file_path</code> (str | Path): File path - <code>more_info</code> (bool): Whether to print detailed parsing info</p> <p>Returns: <code>VmdMotion</code> | <code>PmxModel</code> | <code>VpdPose</code></p> <p>Raises: <code>ValueError</code> - Unsupported file type</p> <pre><code>data = pypmxvmd.load(\"motion.vmd\")\n</code></pre>"},{"location":"API/#pypmxvmdsavedata-file_path","title":"<code>pypmxvmd.save(data, file_path)</code>","text":"<p>Auto-detect the data type and save it.</p> <p>Args: - <code>data</code>: <code>VmdMotion</code> | <code>PmxModel</code> | <code>VpdPose</code> - <code>file_path</code> (str | Path): Output path</p> <pre><code>pypmxvmd.save(model, \"output.pmx\")\n</code></pre>"},{"location":"API/#pypmxvmdload_vmdfile_path-more_infofalse-vmdmotion","title":"<code>pypmxvmd.load_vmd(file_path, more_info=False) -&gt; VmdMotion</code>","text":"<p>Load a VMD motion file.</p>"},{"location":"API/#pypmxvmdsave_vmdmotion-file_path","title":"<code>pypmxvmd.save_vmd(motion, file_path)</code>","text":"<p>Save a VMD motion file.</p>"},{"location":"API/#pypmxvmdload_pmxfile_path-more_infofalse-pmxmodel","title":"<code>pypmxvmd.load_pmx(file_path, more_info=False) -&gt; PmxModel</code>","text":"<p>Load a PMX model file.</p>"},{"location":"API/#pypmxvmdsave_pmxmodel-file_path","title":"<code>pypmxvmd.save_pmx(model, file_path)</code>","text":"<p>Save a PMX model file.</p>"},{"location":"API/#pypmxvmdload_vpdfile_path-more_infofalse-vpdpose","title":"<code>pypmxvmd.load_vpd(file_path, more_info=False) -&gt; VpdPose</code>","text":"<p>Load a VPD pose file.</p>"},{"location":"API/#pypmxvmdsave_vpdpose-file_path","title":"<code>pypmxvmd.save_vpd(pose, file_path)</code>","text":"<p>Save a VPD pose file.</p>"},{"location":"API/#text-files","title":"Text Files","text":"<p>PyPMXVMD also supports structured text format for viewing and editing.</p>"},{"location":"API/#pypmxvmdload_vmd_textfile_path-more_infofalse-vmdmotion","title":"<code>pypmxvmd.load_vmd_text(file_path, more_info=False) -&gt; VmdMotion</code>","text":"<p>Load a VMD motion from text.</p>"},{"location":"API/#pypmxvmdsave_vmd_textmotion-file_path","title":"<code>pypmxvmd.save_vmd_text(motion, file_path)</code>","text":"<p>Save a VMD motion as text.</p>"},{"location":"API/#pypmxvmdload_pmx_textfile_path-more_infofalse-pmxmodel","title":"<code>pypmxvmd.load_pmx_text(file_path, more_info=False) -&gt; PmxModel</code>","text":"<p>Load a PMX model from text.</p>"},{"location":"API/#pypmxvmdsave_pmx_textmodel-file_path","title":"<code>pypmxvmd.save_pmx_text(model, file_path)</code>","text":"<p>Save a PMX model as text.</p>"},{"location":"API/#pypmxvmdload_vpd_textfile_path-more_infofalse-vpdpose","title":"<code>pypmxvmd.load_vpd_text(file_path, more_info=False) -&gt; VpdPose</code>","text":"<p>Load a VPD pose from text.</p>"},{"location":"API/#pypmxvmdsave_vpd_textpose-file_path","title":"<code>pypmxvmd.save_vpd_text(pose, file_path)</code>","text":"<p>Save a VPD pose as text.</p>"},{"location":"API/#pypmxvmdload_textfile_path-more_infofalse-vmdmotion-pmxmodel-vpdpose","title":"<code>pypmxvmd.load_text(file_path, more_info=False) -&gt; VmdMotion | PmxModel | VpdPose</code>","text":"<p>Auto-detect the text format and load.</p>"},{"location":"API/#pypmxvmdsave_textdata-file_path","title":"<code>pypmxvmd.save_text(data, file_path)</code>","text":"<p>Auto-detect the data type and save in the corresponding text format.</p>"},{"location":"API/#data-models","title":"Data Models","text":""},{"location":"API/#vmd-models","title":"VMD Models","text":"<p>VMD (Vocaloid Motion Data) stores motion and camera data.</p>"},{"location":"API/#vmdmotion","title":"<code>VmdMotion</code>","text":"<p>Attributes:</p> Field Type Description <code>header</code> <code>VmdHeader</code> File header <code>bone_frames</code> <code>List[VmdBoneFrame]</code> Bone keyframes <code>morph_frames</code> <code>List[VmdMorphFrame]</code> Morph keyframes <code>camera_frames</code> <code>List[VmdCameraFrame]</code> Camera keyframes <code>light_frames</code> <code>List[VmdLightFrame]</code> Light keyframes <code>shadow_frames</code> <code>List[VmdShadowFrame]</code> Shadow keyframes <code>ik_frames</code> <code>List[VmdIkFrame]</code> IK keyframes"},{"location":"API/#vmdheader","title":"<code>VmdHeader</code>","text":"Field Type Description <code>version</code> <code>int</code> VMD version (1=old, 2=new) <code>model_name</code> <code>str</code> Model name"},{"location":"API/#vmdboneframe","title":"<code>VmdBoneFrame</code>","text":"Field Type Description <code>bone_name</code> <code>str</code> Bone name (max 15 bytes) <code>frame_number</code> <code>int</code> Frame index <code>position</code> <code>List[float]</code> Position [x, y, z] <code>rotation</code> <code>List[float]</code> Euler rotation [x, y, z] (degrees) <code>interpolation</code> <code>List[int]</code> Interpolation curve (16 values) <code>physics_disabled</code> <code>bool</code> Physics flag"},{"location":"API/#vmdmorphframe","title":"<code>VmdMorphFrame</code>","text":"Field Type Description <code>morph_name</code> <code>str</code> Morph name (max 15 bytes) <code>frame_number</code> <code>int</code> Frame index <code>weight</code> <code>float</code> Weight (0.0-1.0)"},{"location":"API/#vmdcameraframe","title":"<code>VmdCameraFrame</code>","text":"Field Type Description <code>frame_number</code> <code>int</code> Frame index <code>distance</code> <code>float</code> Distance to target <code>position</code> <code>List[float]</code> Target position [x, y, z] <code>rotation</code> <code>List[float]</code> Camera rotation [x, y, z] (degrees, converted from radians on read) <code>interpolation</code> <code>List[int]</code> Interpolation curve (24 values) <code>fov</code> <code>int</code> Field of view (1-180) <code>perspective</code> <code>bool</code> Perspective flag"},{"location":"API/#vmdlightframe","title":"<code>VmdLightFrame</code>","text":"Field Type Description <code>frame_number</code> <code>int</code> Frame index <code>color</code> <code>List[float]</code> Light color [r, g, b] <code>position</code> <code>List[float]</code> Light position [x, y, z]"},{"location":"API/#vmdshadowframe","title":"<code>VmdShadowFrame</code>","text":"Field Type Description <code>frame_number</code> <code>int</code> Frame index <code>shadow_mode</code> <code>ShadowMode</code> Shadow mode <code>distance</code> <code>float</code> Shadow distance"},{"location":"API/#vmdikframe","title":"<code>VmdIkFrame</code>","text":"Field Type Description <code>frame_number</code> <code>int</code> Frame index <code>display</code> <code>bool</code> Display flag <code>ik_bones</code> <code>List[VmdIkBone]</code> IK bones"},{"location":"API/#vmdikbone","title":"<code>VmdIkBone</code>","text":"Field Type Description <code>bone_name</code> <code>str</code> IK bone name (max 20 bytes) <code>ik_enabled</code> <code>bool</code> IK enabled"},{"location":"API/#pmx-models","title":"PMX Models","text":"<p>PMX (Polygon Model eXtended) stores 3D model data.</p>"},{"location":"API/#pmxmodel","title":"<code>PmxModel</code>","text":"Field Type Description <code>header</code> <code>PmxHeader</code> File header <code>vertices</code> <code>List[PmxVertex]</code> Vertices <code>faces</code> <code>List[List[int]]</code> Face indices (triangles) <code>textures</code> <code>List[str]</code> Texture paths <code>materials</code> <code>List[PmxMaterial]</code> Materials <code>bones</code> <code>List[PmxBone]</code> Bones <code>morphs</code> <code>List[PmxMorph]</code> Morphs <code>frames</code> <code>List[PmxFrame]</code> Display frames <code>rigidbodies</code> <code>List[PmxRigidBody]</code> Rigid bodies <code>joints</code> <code>List[PmxJoint]</code> Joints <code>softbodies</code> <code>List[PmxSoftBody]</code> Soft bodies (PMX 2.1)"},{"location":"API/#pmxheader","title":"<code>PmxHeader</code>","text":"Field Type Description <code>version</code> <code>float</code> PMX version (2.0 or 2.1) <code>name_jp</code> <code>str</code> Japanese name <code>name_en</code> <code>str</code> English name <code>comment_jp</code> <code>str</code> Japanese comment <code>comment_en</code> <code>str</code> English comment"},{"location":"API/#pmxvertex","title":"<code>PmxVertex</code>","text":"Field Type Description <code>position</code> <code>List[float]</code> Position [x, y, z] <code>normal</code> <code>List[float]</code> Normal [x, y, z] <code>uv</code> <code>List[float]</code> UV [u, v] <code>additional_uvs</code> <code>List[List[float]]</code> Additional UVs <code>weight_mode</code> <code>WeightMode</code> Weight mode <code>weight</code> <code>List[List]</code> Weights [[bone_idx, weight], ...] <code>edge_scale</code> <code>float</code> Edge scale"},{"location":"API/#pmxmaterial","title":"<code>PmxMaterial</code>","text":"Field Type Description <code>name_jp</code> <code>str</code> Japanese name <code>name_en</code> <code>str</code> English name <code>diffuse_color</code> <code>List[float]</code> Diffuse [r, g, b, a] <code>specular_color</code> <code>List[float]</code> Specular [r, g, b] <code>specular_strength</code> <code>float</code> Specular strength <code>ambient_color</code> <code>List[float]</code> Ambient [r, g, b] <code>flags</code> <code>MaterialFlags</code> Material flags <code>edge_color</code> <code>List[float]</code> Edge color [r, g, b, a] <code>edge_size</code> <code>float</code> Edge size <code>texture_path</code> <code>str</code> Texture path <code>sphere_path</code> <code>str</code> Sphere texture path <code>sphere_mode</code> <code>SphMode</code> Sphere mode <code>toon_path</code> <code>str</code> Toon texture path <code>comment</code> <code>str</code> Comment <code>face_count</code> <code>int</code> Face count"},{"location":"API/#materialflags","title":"<code>MaterialFlags</code>","text":"Field Type Description <code>double_sided</code> <code>bool</code> Double sided <code>ground_shadow</code> <code>bool</code> Ground shadow <code>self_shadow_map</code> <code>bool</code> Self shadow map <code>self_shadow</code> <code>bool</code> Self shadow <code>edge_drawing</code> <code>bool</code> Edge drawing <code>vertex_color</code> <code>bool</code> Vertex color <code>point_drawing</code> <code>bool</code> Point drawing <code>line_drawing</code> <code>bool</code> Line drawing"},{"location":"API/#pmxbone","title":"<code>PmxBone</code>","text":"Field Type Description <code>name_jp</code> <code>str</code> Japanese name <code>name_en</code> <code>str</code> English name <code>position</code> <code>List[float]</code> Position [x, y, z] <code>parent_index</code> <code>int</code> Parent bone index (-1 for none) <code>deform_layer</code> <code>int</code> Deform layer <code>bone_flags</code> <code>BoneFlags</code> Bone flags <code>tail</code> <code>int | List[float]</code> Tail (bone index or offset) <code>inherit_parent_index</code> <code>int</code> Inherit parent index <code>inherit_ratio</code> <code>float</code> Inherit ratio <code>fixed_axis</code> <code>List[float]</code> Fixed axis <code>local_axis_x</code> <code>List[float]</code> Local X axis <code>local_axis_z</code> <code>List[float]</code> Local Z axis <code>external_parent_index</code> <code>int</code> External parent index <code>ik_target_index</code> <code>int</code> IK target index <code>ik_loop_count</code> <code>int</code> IK loop count <code>ik_angle_limit</code> <code>float</code> IK angle limit <code>ik_links</code> <code>List[PmxBoneIkLink]</code> IK links"},{"location":"API/#pmxmorph","title":"<code>PmxMorph</code>","text":"Field Type Description <code>name_jp</code> <code>str</code> Japanese name <code>name_en</code> <code>str</code> English name <code>panel</code> <code>MorphPanel</code> Panel <code>morph_type</code> <code>MorphType</code> Morph type <code>items</code> <code>List</code> Items"},{"location":"API/#pmxrigidbody","title":"<code>PmxRigidBody</code>","text":"Field Type Description <code>name_jp</code> <code>str</code> Japanese name <code>name_en</code> <code>str</code> English name <code>bone_index</code> <code>int</code> Bone index <code>group</code> <code>int</code> Collision group <code>nocollide_groups</code> <code>List[int]</code> No-collide groups <code>shape</code> <code>RigidBodyShape</code> Shape <code>size</code> <code>List[float]</code> Size [x, y, z] <code>position</code> <code>List[float]</code> Position [x, y, z] <code>rotation</code> <code>List[float]</code> Rotation [x, y, z] <code>physics_mode</code> <code>RigidBodyPhysMode</code> Physics mode <code>mass</code> <code>float</code> Mass <code>move_damping</code> <code>float</code> Move damping <code>rotation_damping</code> <code>float</code> Rotation damping <code>repulsion</code> <code>float</code> Repulsion <code>friction</code> <code>float</code> Friction"},{"location":"API/#pmxjoint","title":"<code>PmxJoint</code>","text":"Field Type Description <code>name_jp</code> <code>str</code> Japanese name <code>name_en</code> <code>str</code> English name <code>joint_type</code> <code>JointType</code> Joint type <code>rigidbody1_index</code> <code>int</code> Rigid body 1 index <code>rigidbody2_index</code> <code>int</code> Rigid body 2 index <code>position</code> <code>List[float]</code> Position <code>rotation</code> <code>List[float]</code> Rotation <code>position_min</code> <code>List[float]</code> Position min <code>position_max</code> <code>List[float]</code> Position max <code>rotation_min</code> <code>List[float]</code> Rotation min <code>rotation_max</code> <code>List[float]</code> Rotation max <code>position_spring</code> <code>List[float]</code> Position spring <code>rotation_spring</code> <code>List[float]</code> Rotation spring"},{"location":"API/#vpd-models","title":"VPD Models","text":"<p>VPD (Vocaloid Pose Data) stores a single-frame pose.</p>"},{"location":"API/#vpdpose","title":"<code>VpdPose</code>","text":"Field Type Description <code>model_name</code> <code>str</code> Model name <code>bone_poses</code> <code>List[VpdBonePose]</code> Bone poses <code>morph_poses</code> <code>List[VpdMorphPose]</code> Morph poses"},{"location":"API/#vpdbonepose","title":"<code>VpdBonePose</code>","text":"Field Type Description <code>bone_name</code> <code>str</code> Bone name <code>position</code> <code>List[float]</code> Position [x, y, z] <code>rotation</code> <code>List[float]</code> Quaternion [x, y, z, w]"},{"location":"API/#vpdmorphpose","title":"<code>VpdMorphPose</code>","text":"Field Type Description <code>morph_name</code> <code>str</code> Morph name <code>weight</code> <code>float</code> Weight (0.0-1.0)"},{"location":"API/#parsers","title":"Parsers","text":"<p>Use parser classes for more control. When available, they automatically use Cython fast paths.</p>"},{"location":"API/#vmdparser","title":"<code>VmdParser</code>","text":"<pre><code>from pypmxvmd.common.parsers.vmd_parser import VmdParser\n\nparser = VmdParser(progress_callback=lambda p: print(f\"{p*100:.1f}%\"))\nmotion = parser.parse_file(\"motion.vmd\", more_info=True)\nparser.write_file(motion, \"output.vmd\")\n</code></pre>"},{"location":"API/#pmxparser","title":"<code>PmxParser</code>","text":"<pre><code>from pypmxvmd.common.parsers.pmx_parser import PmxParser\n\nparser = PmxParser(progress_callback=lambda p: print(f\"{p*100:.1f}%\"))\nmodel = parser.parse_file(\"model.pmx\", more_info=True)\nparser.write_file(model, \"output.pmx\")\n</code></pre>"},{"location":"API/#vpdparser","title":"<code>VpdParser</code>","text":"<pre><code>from pypmxvmd.common.parsers.vpd_parser import VpdParser\n\nparser = VpdParser(progress_callback=lambda p: print(f\"{p*100:.1f}%\"))\npose = parser.parse_file(\"pose.vpd\", more_info=True)\nparser.write_file(pose, \"output.vpd\")\n</code></pre>"},{"location":"API/#enums","title":"Enums","text":""},{"location":"API/#vmd","title":"VMD","text":""},{"location":"API/#shadowmode","title":"<code>ShadowMode</code>","text":"Value Description <code>OFF</code> (0) Off <code>MODE1</code> (1) Mode 1 <code>MODE2</code> (2) Mode 2"},{"location":"API/#pmx","title":"PMX","text":""},{"location":"API/#weightmode","title":"<code>WeightMode</code>","text":"Value Description <code>BDEF1</code> (0) Single bone <code>BDEF2</code> (1) Two bones <code>BDEF4</code> (2) Four bones <code>SDEF</code> (3) Sphere deformation <code>QDEF</code> (4) Quaternion deformation"},{"location":"API/#sphmode","title":"<code>SphMode</code>","text":"Value Description <code>DISABLED</code> (0) Disabled <code>MULTIPLY</code> (1) Multiply <code>ADDITIVE</code> (2) Additive <code>SUBTEX</code> (3) Sub texture"},{"location":"API/#morphtype","title":"<code>MorphType</code>","text":"Value Description <code>GROUP</code> (0) Group <code>VERTEX</code> (1) Vertex <code>BONE</code> (2) Bone <code>UV</code> (3) UV <code>EXTENDED_UV1</code> (4) Extended UV1 <code>EXTENDED_UV2</code> (5) Extended UV2 <code>EXTENDED_UV3</code> (6) Extended UV3 <code>EXTENDED_UV4</code> (7) Extended UV4 <code>MATERIAL</code> (8) Material <code>FLIP</code> (9) Flip <code>IMPULSE</code> (10) Impulse"},{"location":"API/#morphpanel","title":"<code>MorphPanel</code>","text":"Value Description <code>HIDDEN</code> (0) Hidden <code>EYEBROW</code> (1) Eyebrow <code>EYE</code> (2) Eye <code>MOUTH</code> (3) Mouth <code>OTHER</code> (4) Other"},{"location":"API/#rigidbodyshape","title":"<code>RigidBodyShape</code>","text":"Value Description <code>SPHERE</code> (0) Sphere <code>BOX</code> (1) Box <code>CAPSULE</code> (2) Capsule"},{"location":"API/#rigidbodyphysmode","title":"<code>RigidBodyPhysMode</code>","text":"Value Description <code>BONE</code> (0) Follow bone <code>PHYSICS</code> (1) Physics <code>PHYSICS_BONE</code> (2) Physics + follow bone"},{"location":"API/#jointtype","title":"<code>JointType</code>","text":"Value Description <code>SPRING6DOF</code> (0) 6DOF spring"},{"location":"API/#examples","title":"Examples","text":""},{"location":"API/#example-1-read-vmd-motion-and-inspect","title":"Example 1: Read VMD motion and inspect","text":"<pre><code>import pypmxvmd\n\nmotion = pypmxvmd.load_vmd(\"dance.vmd\", more_info=True)\nprint(f\"Version: {motion.header.version}\")\nprint(f\"Model: {motion.header.model_name}\")\nprint(f\"Bone frames: {motion.get_bone_frame_count()}\")\nprint(f\"Morph frames: {motion.get_morph_frame_count()}\")\n\nfor frame in motion.bone_frames[:5]:\n    print(frame.bone_name, frame.frame_number, frame.position)\n</code></pre>"},{"location":"API/#example-2-create-a-simple-pmx-model","title":"Example 2: Create a simple PMX model","text":"<pre><code>import pypmxvmd\nfrom pypmxvmd.common.models.pmx import PmxModel, PmxHeader, PmxVertex, PmxMaterial\n\nmodel = PmxModel()\nmodel.header = PmxHeader(version=2.0, name_jp=\"Triangle\", name_en=\"Triangle\")\nmodel.vertices = [\n    PmxVertex(position=[0.0, 0.0, 0.0], normal=[0.0, 0.0, 1.0], uv=[0.0, 0.0]),\n    PmxVertex(position=[1.0, 0.0, 0.0], normal=[0.0, 0.0, 1.0], uv=[1.0, 0.0]),\n    PmxVertex(position=[0.5, 1.0, 0.0], normal=[0.0, 0.0, 1.0], uv=[0.5, 1.0]),\n]\nmodel.faces = [[0, 1, 2]]\nmodel.materials = [\n    PmxMaterial(name_jp=\"Material\", name_en=\"Material\", diffuse_color=[0.8, 0.8, 0.8, 1.0], face_count=3)\n]\n\npypmxvmd.save_pmx(model, \"triangle.pmx\")\n</code></pre>"},{"location":"API/#example-3-modify-vmd-motion","title":"Example 3: Modify VMD motion","text":"<pre><code>import pypmxvmd\n\nmotion = pypmxvmd.load_vmd(\"original.vmd\")\n\nfor frame in motion.bone_frames:\n    frame.position[1] += 10.0\n\nfor frame in motion.morph_frames:\n    frame.weight *= 0.5\n\npypmxvmd.save_vmd(motion, \"modified.vmd\")\n</code></pre>"},{"location":"API/#example-4-convert-vpd-pose-to-vmd-motion","title":"Example 4: Convert VPD pose to VMD motion","text":"<pre><code>import pypmxvmd\nfrom pypmxvmd.common.models.vmd import VmdMotion, VmdHeader, VmdBoneFrame, VmdMorphFrame\n\npose = pypmxvmd.load_vpd(\"pose.vpd\")\n\nmotion = VmdMotion()\nmotion.header = VmdHeader(version=2, model_name=pose.model_name)\n\nfor bone_pose in pose.bone_poses:\n    frame = VmdBoneFrame(\n        bone_name=bone_pose.bone_name,\n        frame_number=0,\n        position=bone_pose.position,\n        rotation=[0.0, 0.0, 0.0]\n    )\n    motion.bone_frames.append(frame)\n\nfor morph_pose in pose.morph_poses:\n    frame = VmdMorphFrame(\n        morph_name=morph_pose.morph_name,\n        frame_number=0,\n        weight=morph_pose.weight\n    )\n    motion.morph_frames.append(frame)\n\npypmxvmd.save_vmd(motion, \"pose_as_motion.vmd\")\n</code></pre>"},{"location":"API/#example-5-validate-data","title":"Example 5: Validate data","text":"<pre><code>import pypmxvmd\n\nmodel = pypmxvmd.load_pmx(\"model.pmx\")\n\ntry:\n    model.validate()\n    print(\"Model validation passed\")\nexcept AssertionError as e:\n    print(f\"Validation failed: {e}\")\n</code></pre>"},{"location":"API/#error-handling","title":"Error Handling","text":"<p>PyPMXVMD uses standard Python exceptions:</p> Exception Description <code>FileNotFoundError</code> File not found <code>ValueError</code> Invalid format or data <code>IOError</code> I/O error <code>AssertionError</code> Validation failure <pre><code>import pypmxvmd\n\ntry:\n    model = pypmxvmd.load_pmx(\"missing.pmx\")\nexcept FileNotFoundError:\n    print(\"File not found\")\nexcept ValueError as e:\n    print(f\"Format error: {e}\")\n</code></pre>"},{"location":"API/#compatibility","title":"Compatibility","text":"<ul> <li>VMD: Supports v1 and v2</li> <li>PMX: Supports 2.0 and 2.1</li> <li>VPD: Supports standard VPD text format</li> <li>Encoding: VMD uses Shift-JIS, PMX supports UTF-16LE/UTF-8, VPD uses Shift-JIS</li> </ul>"},{"location":"API/#license","title":"License","text":"<p>MIT License</p>"},{"location":"API_CN/","title":"PyPMXVMD API \u6587\u6863","text":"<p>PyPMXVMD \u662f\u4e00\u4e2a\u7528\u4e8e\u89e3\u6790\u548c\u4fee\u6539 MikuMikuDance (MMD) \u6587\u4ef6\u7684 Python \u5e93\u3002</p> <p>\u7248\u672c: 2.7.1</p> <p>Python\u8981\u6c42: &gt;= 3.8</p> <p>\u52a0\u901f: \u652f\u6301\u53ef\u9009 Cython \u5feb\u901f\u89e3\u6790\u4e0e\u4e8c\u8fdb\u5236 I/O\uff0c\u82e5\u4e0d\u53ef\u7528\u5c06\u81ea\u52a8\u56de\u9000\u5230\u7eaf Python \u89e3\u6790\u3002</p>"},{"location":"API_CN/#_1","title":"\u76ee\u5f55","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u9876\u5c42API</li> <li>\u6570\u636e\u6a21\u578b</li> <li>VMD\u6a21\u578b</li> <li>PMX\u6a21\u578b</li> <li>VPD\u6a21\u578b</li> <li>\u89e3\u6790\u5668</li> <li>\u679a\u4e3e\u7c7b\u578b</li> <li>\u4f7f\u7528\u793a\u4f8b</li> </ul>"},{"location":"API_CN/#\u5feb\u901f\u5f00\u59cb","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"API_CN/#_2","title":"\u5b89\u88c5","text":"<pre><code>pip install pypmxvmd\n</code></pre>"},{"location":"API_CN/#_3","title":"\u57fa\u7840\u7528\u6cd5","text":"<pre><code>import pypmxvmd\n\n# \u81ea\u52a8\u68c0\u6d4b\u6587\u4ef6\u7c7b\u578b\u5e76\u52a0\u8f7d\ndata = pypmxvmd.load(\"motion.vmd\")\n\n# \u4fdd\u5b58\u6587\u4ef6\npypmxvmd.save(data, \"output.vmd\")\n</code></pre>"},{"location":"API_CN/#\u9876\u5c42api","title":"\u9876\u5c42API","text":"<p>PyPMXVMD \u63d0\u4f9b\u4e86\u7b80\u6d01\u7684\u9876\u5c42\u51fd\u6570\uff0c\u7528\u4e8e\u6587\u4ef6\u7684\u52a0\u8f7d\u548c\u4fdd\u5b58\u3002</p>"},{"location":"API_CN/#_4","title":"\u4e8c\u8fdb\u5236\u6587\u4ef6\u64cd\u4f5c","text":""},{"location":"API_CN/#pypmxvmdloadfile_path-more_infofalse","title":"<code>pypmxvmd.load(file_path, more_info=False)</code>","text":"<p>\u81ea\u52a8\u68c0\u6d4b\u6587\u4ef6\u7c7b\u578b\u5e76\u52a0\u8f7d\u3002</p> <p>\u53c2\u6570: - <code>file_path</code> (str | Path): \u6587\u4ef6\u8def\u5f84 - <code>more_info</code> (bool): \u662f\u5426\u663e\u793a\u8be6\u7ec6\u89e3\u6790\u4fe1\u606f</p> <p>\u8fd4\u56de: <code>VmdMotion</code> | <code>PmxModel</code> | <code>VpdPose</code></p> <p>\u5f02\u5e38: <code>ValueError</code> - \u4e0d\u652f\u6301\u7684\u6587\u4ef6\u7c7b\u578b</p> <pre><code>data = pypmxvmd.load(\"model.pmx\")\n</code></pre>"},{"location":"API_CN/#pypmxvmdsavedata-file_path","title":"<code>pypmxvmd.save(data, file_path)</code>","text":"<p>\u81ea\u52a8\u68c0\u6d4b\u6570\u636e\u7c7b\u578b\u5e76\u4fdd\u5b58\u3002</p> <p>\u53c2\u6570: - <code>data</code>: <code>VmdMotion</code> | <code>PmxModel</code> | <code>VpdPose</code> \u5bf9\u8c61 - <code>file_path</code> (str | Path): \u8f93\u51fa\u6587\u4ef6\u8def\u5f84</p> <pre><code>pypmxvmd.save(model, \"output.pmx\")\n</code></pre>"},{"location":"API_CN/#pypmxvmdload_vmdfile_path-more_infofalse-vmdmotion","title":"<code>pypmxvmd.load_vmd(file_path, more_info=False) -&gt; VmdMotion</code>","text":"<p>\u52a0\u8f7dVMD\u52a8\u4f5c\u6587\u4ef6\u3002</p> <p>\u53c2\u6570: - <code>file_path</code> (str | Path): VMD\u6587\u4ef6\u8def\u5f84 - <code>more_info</code> (bool): \u662f\u5426\u663e\u793a\u8be6\u7ec6\u89e3\u6790\u4fe1\u606f</p> <p>\u8fd4\u56de: <code>VmdMotion</code> \u5bf9\u8c61</p> <pre><code>motion = pypmxvmd.load_vmd(\"dance.vmd\")\nprint(f\"\u9aa8\u9abc\u5e27\u6570: {len(motion.bone_frames)}\")\n</code></pre>"},{"location":"API_CN/#pypmxvmdsave_vmdmotion-file_path","title":"<code>pypmxvmd.save_vmd(motion, file_path)</code>","text":"<p>\u4fdd\u5b58VMD\u52a8\u4f5c\u6587\u4ef6\u3002</p> <p>\u53c2\u6570: - <code>motion</code> (VmdMotion): VMD\u52a8\u4f5c\u5bf9\u8c61 - <code>file_path</code> (str | Path): \u8f93\u51fa\u6587\u4ef6\u8def\u5f84</p> <pre><code>pypmxvmd.save_vmd(motion, \"output.vmd\")\n</code></pre>"},{"location":"API_CN/#pypmxvmdload_pmxfile_path-more_infofalse-pmxmodel","title":"<code>pypmxvmd.load_pmx(file_path, more_info=False) -&gt; PmxModel</code>","text":"<p>\u52a0\u8f7dPMX\u6a21\u578b\u6587\u4ef6\u3002</p> <p>\u53c2\u6570: - <code>file_path</code> (str | Path): PMX\u6587\u4ef6\u8def\u5f84 - <code>more_info</code> (bool): \u662f\u5426\u663e\u793a\u8be6\u7ec6\u89e3\u6790\u4fe1\u606f</p> <p>\u8fd4\u56de: <code>PmxModel</code> \u5bf9\u8c61</p> <pre><code>model = pypmxvmd.load_pmx(\"character.pmx\")\nprint(f\"\u9876\u70b9\u6570: {len(model.vertices)}\")\n</code></pre>"},{"location":"API_CN/#pypmxvmdsave_pmxmodel-file_path","title":"<code>pypmxvmd.save_pmx(model, file_path)</code>","text":"<p>\u4fdd\u5b58PMX\u6a21\u578b\u6587\u4ef6\u3002</p> <p>\u53c2\u6570: - <code>model</code> (PmxModel): PMX\u6a21\u578b\u5bf9\u8c61 - <code>file_path</code> (str | Path): \u8f93\u51fa\u6587\u4ef6\u8def\u5f84</p> <pre><code>pypmxvmd.save_pmx(model, \"output.pmx\")\n</code></pre>"},{"location":"API_CN/#pypmxvmdload_vpdfile_path-more_infofalse-vpdpose","title":"<code>pypmxvmd.load_vpd(file_path, more_info=False) -&gt; VpdPose</code>","text":"<p>\u52a0\u8f7dVPD\u59ff\u52bf\u6587\u4ef6\u3002</p> <p>\u53c2\u6570: - <code>file_path</code> (str | Path): VPD\u6587\u4ef6\u8def\u5f84 - <code>more_info</code> (bool): \u662f\u5426\u663e\u793a\u8be6\u7ec6\u89e3\u6790\u4fe1\u606f</p> <p>\u8fd4\u56de: <code>VpdPose</code> \u5bf9\u8c61</p> <pre><code>pose = pypmxvmd.load_vpd(\"pose.vpd\")\nprint(f\"\u9aa8\u9abc\u59ff\u52bf\u6570: {len(pose.bone_poses)}\")\n</code></pre>"},{"location":"API_CN/#pypmxvmdsave_vpdpose-file_path","title":"<code>pypmxvmd.save_vpd(pose, file_path)</code>","text":"<p>\u4fdd\u5b58VPD\u59ff\u52bf\u6587\u4ef6\u3002</p> <p>\u53c2\u6570: - <code>pose</code> (VpdPose): VPD\u59ff\u52bf\u5bf9\u8c61 - <code>file_path</code> (str | Path): \u8f93\u51fa\u6587\u4ef6\u8def\u5f84</p> <pre><code>pypmxvmd.save_vpd(pose, \"output.vpd\")\n</code></pre>"},{"location":"API_CN/#_5","title":"\u6587\u672c\u6587\u4ef6\u64cd\u4f5c","text":"<p>PyPMXVMD \u8fd8\u652f\u6301\u6587\u672c\u683c\u5f0f\u7684\u8bfb\u5199\uff0c\u4fbf\u4e8e\u4eba\u5de5\u7f16\u8f91\u548c\u67e5\u770b\u3002</p>"},{"location":"API_CN/#pypmxvmdload_vmd_textfile_path-more_infofalse-vmdmotion","title":"<code>pypmxvmd.load_vmd_text(file_path, more_info=False) -&gt; VmdMotion</code>","text":"<p>\u4ece\u6587\u672c\u683c\u5f0f\u52a0\u8f7dVMD\u52a8\u4f5c\u3002</p>"},{"location":"API_CN/#pypmxvmdsave_vmd_textmotion-file_path","title":"<code>pypmxvmd.save_vmd_text(motion, file_path)</code>","text":"<p>\u5c06VMD\u52a8\u4f5c\u4fdd\u5b58\u4e3a\u6587\u672c\u683c\u5f0f\u3002</p>"},{"location":"API_CN/#pypmxvmdload_pmx_textfile_path-more_infofalse-pmxmodel","title":"<code>pypmxvmd.load_pmx_text(file_path, more_info=False) -&gt; PmxModel</code>","text":"<p>\u4ece\u6587\u672c\u683c\u5f0f\u52a0\u8f7dPMX\u6a21\u578b\u3002</p>"},{"location":"API_CN/#pypmxvmdsave_pmx_textmodel-file_path","title":"<code>pypmxvmd.save_pmx_text(model, file_path)</code>","text":"<p>\u5c06PMX\u6a21\u578b\u4fdd\u5b58\u4e3a\u6587\u672c\u683c\u5f0f\u3002</p>"},{"location":"API_CN/#pypmxvmdload_vpd_textfile_path-more_infofalse-vpdpose","title":"<code>pypmxvmd.load_vpd_text(file_path, more_info=False) -&gt; VpdPose</code>","text":"<p>\u4ece\u6587\u672c\u683c\u5f0f\u52a0\u8f7dVPD\u59ff\u52bf\u3002</p>"},{"location":"API_CN/#pypmxvmdsave_vpd_textpose-file_path","title":"<code>pypmxvmd.save_vpd_text(pose, file_path)</code>","text":"<p>\u5c06VPD\u59ff\u52bf\u4fdd\u5b58\u4e3a\u6587\u672c\u683c\u5f0f\u3002</p>"},{"location":"API_CN/#pypmxvmdload_textfile_path-more_infofalse-vmdmotion-pmxmodel-vpdpose","title":"<code>pypmxvmd.load_text(file_path, more_info=False) -&gt; VmdMotion | PmxModel | VpdPose</code>","text":"<p>\u81ea\u52a8\u68c0\u6d4b\u6587\u672c\u6587\u4ef6\u683c\u5f0f\u5e76\u52a0\u8f7d\u3002</p> <p>\u53c2\u6570: - <code>file_path</code> (str | Path): \u6587\u672c\u6587\u4ef6\u8def\u5f84 - <code>more_info</code> (bool): \u662f\u5426\u663e\u793a\u8be6\u7ec6\u89e3\u6790\u4fe1\u606f</p> <p>\u8fd4\u56de: <code>VmdMotion</code> | <code>PmxModel</code> | <code>VpdPose</code></p>"},{"location":"API_CN/#pypmxvmdsave_textdata-file_path","title":"<code>pypmxvmd.save_text(data, file_path)</code>","text":"<p>\u81ea\u52a8\u68c0\u6d4b\u6570\u636e\u7c7b\u578b\u5e76\u4fdd\u5b58\u4e3a\u5bf9\u5e94\u6587\u672c\u683c\u5f0f\u3002</p> <p>\u53c2\u6570: - <code>data</code>: <code>VmdMotion</code> | <code>PmxModel</code> | <code>VpdPose</code> \u5bf9\u8c61 - <code>file_path</code> (str | Path): \u8f93\u51fa\u6587\u672c\u6587\u4ef6\u8def\u5f84</p>"},{"location":"API_CN/#\u6570\u636e\u6a21\u578b","title":"\u6570\u636e\u6a21\u578b","text":""},{"location":"API_CN/#vmd\u6a21\u578b","title":"VMD\u6a21\u578b","text":"<p>VMD (Vocaloid Motion Data) \u7528\u4e8e\u5b58\u50a8\u52a8\u4f5c\u548c\u76f8\u673a\u6570\u636e\u3002</p>"},{"location":"API_CN/#vmdmotion","title":"<code>VmdMotion</code>","text":"<p>VMD\u52a8\u4f5c\u4e3b\u7c7b\uff0c\u5305\u542b\u6240\u6709\u52a8\u4f5c\u6570\u636e\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>header</code> <code>VmdHeader</code> \u6587\u4ef6\u5934\u4fe1\u606f <code>bone_frames</code> <code>List[VmdBoneFrame]</code> \u9aa8\u9abc\u5173\u952e\u5e27\u5217\u8868 <code>morph_frames</code> <code>List[VmdMorphFrame]</code> \u53d8\u5f62\u5173\u952e\u5e27\u5217\u8868 <code>camera_frames</code> <code>List[VmdCameraFrame]</code> \u76f8\u673a\u5173\u952e\u5e27\u5217\u8868 <code>light_frames</code> <code>List[VmdLightFrame]</code> \u5149\u7167\u5173\u952e\u5e27\u5217\u8868 <code>shadow_frames</code> <code>List[VmdShadowFrame]</code> \u9634\u5f71\u5173\u952e\u5e27\u5217\u8868 <code>ik_frames</code> <code>List[VmdIkFrame]</code> IK\u663e\u793a\u5173\u952e\u5e27\u5217\u8868 <p>\u65b9\u6cd5:</p> <pre><code>motion.get_bone_frame_count() -&gt; int      # \u83b7\u53d6\u9aa8\u9abc\u5e27\u6570\nmotion.get_morph_frame_count() -&gt; int     # \u83b7\u53d6\u53d8\u5f62\u5e27\u6570\nmotion.get_total_frame_count() -&gt; int     # \u83b7\u53d6\u603b\u5e27\u6570\nmotion.is_camera_motion() -&gt; bool         # \u662f\u5426\u4e3a\u76f8\u673a\u52a8\u4f5c\nmotion.validate()                         # \u9a8c\u8bc1\u6570\u636e\u6709\u6548\u6027\n</code></pre>"},{"location":"API_CN/#vmdheader","title":"<code>VmdHeader</code>","text":"<p>VMD\u6587\u4ef6\u5934\u4fe1\u606f\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>version</code> <code>int</code> VMD\u7248\u672c (1=\u65e7\u7248, 2=\u65b0\u7248) <code>model_name</code> <code>str</code> \u6a21\u578b\u540d\u79f0 (\u65e5\u6587) <pre><code>header = VmdHeader(version=2, model_name=\"TestModel\")\n</code></pre>"},{"location":"API_CN/#vmdboneframe","title":"<code>VmdBoneFrame</code>","text":"<p>\u9aa8\u9abc\u5173\u952e\u5e27\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>bone_name</code> <code>str</code> \u9aa8\u9abc\u540d\u79f0 (\u65e5\u6587\uff0c\u6700\u592715\u5b57\u8282) <code>frame_number</code> <code>int</code> \u5e27\u53f7 (\u22650) <code>position</code> <code>List[float]</code> \u4f4d\u7f6e [x, y, z] <code>rotation</code> <code>List[float]</code> \u65cb\u8f6c\u6b27\u62c9\u89d2 [x, y, z] (\u5ea6) <code>interpolation</code> <code>List[int]</code> \u63d2\u503c\u66f2\u7ebf\u6570\u636e (16\u4e2a\u503c) <code>physics_disabled</code> <code>bool</code> \u662f\u5426\u7981\u7528\u7269\u7406 <pre><code>frame = VmdBoneFrame(\n    bone_name=\"\u30bb\u30f3\u30bf\u30fc\",\n    frame_number=0,\n    position=[0.0, 10.0, 0.0],\n    rotation=[0.0, 0.0, 0.0]\n)\n</code></pre>"},{"location":"API_CN/#vmdmorphframe","title":"<code>VmdMorphFrame</code>","text":"<p>\u53d8\u5f62\u5173\u952e\u5e27\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>morph_name</code> <code>str</code> \u53d8\u5f62\u540d\u79f0 (\u65e5\u6587\uff0c\u6700\u592715\u5b57\u8282) <code>frame_number</code> <code>int</code> \u5e27\u53f7 (\u22650) <code>weight</code> <code>float</code> \u6743\u91cd\u503c (0.0-1.0) <pre><code>frame = VmdMorphFrame(\n    morph_name=\"\u307e\u3070\u305f\u304d\",\n    frame_number=30,\n    weight=1.0\n)\n</code></pre>"},{"location":"API_CN/#vmdcameraframe","title":"<code>VmdCameraFrame</code>","text":"<p>\u76f8\u673a\u5173\u952e\u5e27\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>frame_number</code> <code>int</code> \u5e27\u53f7 <code>distance</code> <code>float</code> \u5230\u76ee\u6807\u7684\u8ddd\u79bb <code>position</code> <code>List[float]</code> \u76ee\u6807\u4f4d\u7f6e [x, y, z] <code>rotation</code> <code>List[float]</code> \u76f8\u673a\u65cb\u8f6c [x, y, z] (\u5ea6\u6570\uff0c\u8bfb\u53d6\u65f6\u7531\u5f27\u5ea6\u8f6c\u6362) <code>interpolation</code> <code>List[int]</code> \u63d2\u503c\u66f2\u7ebf\u6570\u636e (24\u4e2a\u503c) <code>fov</code> <code>int</code> \u89c6\u91ce\u89d2\u5ea6 (1-180) <code>perspective</code> <code>bool</code> \u662f\u5426\u900f\u89c6\u6295\u5f71"},{"location":"API_CN/#vmdlightframe","title":"<code>VmdLightFrame</code>","text":"<p>\u5149\u7167\u5173\u952e\u5e27\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>frame_number</code> <code>int</code> \u5e27\u53f7 <code>color</code> <code>List[float]</code> \u5149\u7167\u989c\u8272 [r, g, b] (0.0-1.0) <code>position</code> <code>List[float]</code> \u5149\u7167\u4f4d\u7f6e [x, y, z]"},{"location":"API_CN/#vmdshadowframe","title":"<code>VmdShadowFrame</code>","text":"<p>\u9634\u5f71\u5173\u952e\u5e27\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>frame_number</code> <code>int</code> \u5e27\u53f7 <code>shadow_mode</code> <code>ShadowMode</code> \u9634\u5f71\u6a21\u5f0f <code>distance</code> <code>float</code> \u9634\u5f71\u8ddd\u79bb"},{"location":"API_CN/#vmdikframe","title":"<code>VmdIkFrame</code>","text":"<p>IK\u663e\u793a\u5173\u952e\u5e27\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>frame_number</code> <code>int</code> \u5e27\u53f7 <code>display</code> <code>bool</code> \u662f\u5426\u663e\u793a\u6a21\u578b <code>ik_bones</code> <code>List[VmdIkBone]</code> IK\u9aa8\u9abc\u5217\u8868"},{"location":"API_CN/#vmdikbone","title":"<code>VmdIkBone</code>","text":"<p>IK\u9aa8\u9abc\u4fe1\u606f\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>bone_name</code> <code>str</code> IK\u9aa8\u9abc\u540d\u79f0 (\u6700\u592720\u5b57\u8282) <code>ik_enabled</code> <code>bool</code> \u662f\u5426\u542f\u7528IK"},{"location":"API_CN/#pmx\u6a21\u578b","title":"PMX\u6a21\u578b","text":"<p>PMX (Polygon Model eXtended) \u7528\u4e8e\u5b58\u50a83D\u6a21\u578b\u6570\u636e\u3002</p>"},{"location":"API_CN/#pmxmodel","title":"<code>PmxModel</code>","text":"<p>PMX\u6a21\u578b\u4e3b\u7c7b\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>header</code> <code>PmxHeader</code> \u6587\u4ef6\u5934\u4fe1\u606f <code>vertices</code> <code>List[PmxVertex]</code> \u9876\u70b9\u5217\u8868 <code>faces</code> <code>List[List[int]]</code> \u9762\u7d22\u5f15\u5217\u8868 (\u6bcf\u97623\u4e2a\u9876\u70b9\u7d22\u5f15) <code>textures</code> <code>List[str]</code> \u7eb9\u7406\u8def\u5f84\u5217\u8868 <code>materials</code> <code>List[PmxMaterial]</code> \u6750\u8d28\u5217\u8868 <code>bones</code> <code>List[PmxBone]</code> \u9aa8\u9abc\u5217\u8868 <code>morphs</code> <code>List[PmxMorph]</code> \u53d8\u5f62\u5217\u8868 <code>frames</code> <code>List[PmxFrame]</code> \u663e\u793a\u6846\u67b6\u5217\u8868 <code>rigidbodies</code> <code>List[PmxRigidBody]</code> \u521a\u4f53\u5217\u8868 <code>joints</code> <code>List[PmxJoint]</code> \u5173\u8282\u5217\u8868 <code>softbodies</code> <code>List[PmxSoftBody]</code> \u8f6f\u4f53\u5217\u8868 (PMX 2.1) <p>\u65b9\u6cd5:</p> <pre><code>model.get_vertex_count() -&gt; int      # \u83b7\u53d6\u9876\u70b9\u6570\nmodel.get_face_count() -&gt; int        # \u83b7\u53d6\u9762\u6570\nmodel.get_material_count() -&gt; int    # \u83b7\u53d6\u6750\u8d28\u6570\nmodel.validate()                     # \u9a8c\u8bc1\u6570\u636e\u6709\u6548\u6027\n</code></pre>"},{"location":"API_CN/#pmxheader","title":"<code>PmxHeader</code>","text":"<p>PMX\u6587\u4ef6\u5934\u4fe1\u606f\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>version</code> <code>float</code> PMX\u7248\u672c\u53f7 (2.0 \u6216 2.1) <code>name_jp</code> <code>str</code> \u65e5\u6587\u540d\u79f0 <code>name_en</code> <code>str</code> \u82f1\u6587\u540d\u79f0 <code>comment_jp</code> <code>str</code> \u65e5\u6587\u6ce8\u91ca <code>comment_en</code> <code>str</code> \u82f1\u6587\u6ce8\u91ca <pre><code>header = PmxHeader(\n    version=2.0,\n    name_jp=\"\u30c6\u30b9\u30c8\u30e2\u30c7\u30eb\",\n    name_en=\"TestModel\",\n    comment_jp=\"\u30c6\u30b9\u30c8\u7528\",\n    comment_en=\"For testing\"\n)\n</code></pre>"},{"location":"API_CN/#pmxvertex","title":"<code>PmxVertex</code>","text":"<p>PMX\u9876\u70b9\u6570\u636e\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>position</code> <code>List[float]</code> \u4f4d\u7f6e [x, y, z] <code>normal</code> <code>List[float]</code> \u6cd5\u7ebf [x, y, z] <code>uv</code> <code>List[float]</code> UV\u5750\u6807 [u, v] <code>additional_uvs</code> <code>List[List[float]]</code> \u989d\u5916UV\u5217\u8868 <code>weight_mode</code> <code>WeightMode</code> \u6743\u91cd\u6a21\u5f0f <code>weight</code> <code>List[List]</code> \u6743\u91cd\u6570\u636e [[bone_idx, weight], ...] <code>edge_scale</code> <code>float</code> \u8fb9\u7f18\u7f29\u653e <pre><code>vertex = PmxVertex(\n    position=[0.0, 1.0, 0.0],\n    normal=[0.0, 1.0, 0.0],\n    uv=[0.5, 0.5]\n)\n</code></pre>"},{"location":"API_CN/#pmxmaterial","title":"<code>PmxMaterial</code>","text":"<p>PMX\u6750\u8d28\u6570\u636e\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>name_jp</code> <code>str</code> \u65e5\u6587\u540d\u79f0 <code>name_en</code> <code>str</code> \u82f1\u6587\u540d\u79f0 <code>diffuse_color</code> <code>List[float]</code> \u6f2b\u53cd\u5c04\u8272 [r, g, b, a] <code>specular_color</code> <code>List[float]</code> \u955c\u9762\u53cd\u5c04\u8272 [r, g, b] <code>specular_strength</code> <code>float</code> \u955c\u9762\u53cd\u5c04\u5f3a\u5ea6 <code>ambient_color</code> <code>List[float]</code> \u73af\u5883\u5149\u8272 [r, g, b] <code>flags</code> <code>MaterialFlags</code> \u6750\u8d28\u6807\u5fd7\u4f4d <code>edge_color</code> <code>List[float]</code> \u8fb9\u7f18\u989c\u8272 [r, g, b, a] <code>edge_size</code> <code>float</code> \u8fb9\u7f18\u5927\u5c0f <code>texture_path</code> <code>str</code> \u7eb9\u7406\u8def\u5f84 <code>sphere_path</code> <code>str</code> \u7403\u9762\u7eb9\u7406\u8def\u5f84 <code>sphere_mode</code> <code>SphMode</code> \u7403\u9762\u7eb9\u7406\u6a21\u5f0f <code>toon_path</code> <code>str</code> \u5361\u901a\u6e32\u67d3\u7eb9\u7406\u8def\u5f84 <code>comment</code> <code>str</code> \u6ce8\u91ca <code>face_count</code> <code>int</code> \u9762\u9876\u70b9\u6570 <pre><code>material = PmxMaterial(\n    name_jp=\"\u6750\u8cea\",\n    name_en=\"Material\",\n    diffuse_color=[0.8, 0.8, 0.8, 1.0],\n    specular_color=[0.3, 0.3, 0.3],\n    specular_strength=5.0,\n    ambient_color=[0.2, 0.2, 0.2],\n    face_count=3\n)\n</code></pre>"},{"location":"API_CN/#materialflags","title":"<code>MaterialFlags</code>","text":"<p>\u6750\u8d28\u6807\u5fd7\u4f4d\u7c7b\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>double_sided</code> <code>bool</code> \u53cc\u9762\u663e\u793a <code>ground_shadow</code> <code>bool</code> \u5730\u9762\u9634\u5f71 <code>self_shadow_map</code> <code>bool</code> \u81ea\u9634\u5f71\u8d34\u56fe <code>self_shadow</code> <code>bool</code> \u81ea\u9634\u5f71 <code>edge_drawing</code> <code>bool</code> \u8fb9\u7f18\u7ed8\u5236 <code>vertex_color</code> <code>bool</code> \u9876\u70b9\u8272 <code>point_drawing</code> <code>bool</code> \u70b9\u7ed8\u5236 <code>line_drawing</code> <code>bool</code> \u7ebf\u7ed8\u5236 <pre><code>flags = MaterialFlags()\nflags.double_sided = True\nflags.edge_drawing = True\n</code></pre>"},{"location":"API_CN/#pmxbone","title":"<code>PmxBone</code>","text":"<p>PMX\u9aa8\u9abc\u6570\u636e\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>name_jp</code> <code>str</code> \u65e5\u6587\u540d\u79f0 <code>name_en</code> <code>str</code> \u82f1\u6587\u540d\u79f0 <code>position</code> <code>List[float]</code> \u4f4d\u7f6e [x, y, z] <code>parent_index</code> <code>int</code> \u7236\u9aa8\u9abc\u7d22\u5f15 (-1\u8868\u793a\u65e0\u7236\u9aa8\u9abc) <code>deform_layer</code> <code>int</code> \u53d8\u5f62\u5c42\u7ea7 <code>bone_flags</code> <code>BoneFlags</code> \u9aa8\u9abc\u6807\u5fd7\u4f4d <code>tail</code> <code>int \\| List[float]</code> \u5c3e\u7aef (\u9aa8\u9abc\u7d22\u5f15\u6216\u504f\u79fb\u91cf) <code>inherit_parent_index</code> <code>int</code> \u7ee7\u627f\u7236\u7d22\u5f15 <code>inherit_ratio</code> <code>float</code> \u7ee7\u627f\u6bd4\u7387 <code>fixed_axis</code> <code>List[float]</code> \u56fa\u5b9a\u8f74 <code>local_axis_x</code> <code>List[float]</code> \u672c\u5730X\u8f74 <code>local_axis_z</code> <code>List[float]</code> \u672c\u5730Z\u8f74 <code>external_parent_index</code> <code>int</code> \u5916\u90e8\u7236\u7d22\u5f15 <code>ik_target_index</code> <code>int</code> IK\u76ee\u6807\u7d22\u5f15 <code>ik_loop_count</code> <code>int</code> IK\u5faa\u73af\u6b21\u6570 <code>ik_angle_limit</code> <code>float</code> IK\u89d2\u5ea6\u9650\u5236 <code>ik_links</code> <code>List[PmxBoneIkLink]</code> IK\u94fe\u63a5\u5217\u8868"},{"location":"API_CN/#pmxmorph","title":"<code>PmxMorph</code>","text":"<p>PMX\u53d8\u5f62\u6570\u636e\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>name_jp</code> <code>str</code> \u65e5\u6587\u540d\u79f0 <code>name_en</code> <code>str</code> \u82f1\u6587\u540d\u79f0 <code>panel</code> <code>MorphPanel</code> \u9762\u677f\u4f4d\u7f6e <code>morph_type</code> <code>MorphType</code> \u53d8\u5f62\u7c7b\u578b <code>items</code> <code>List</code> \u53d8\u5f62\u9879\u76ee\u5217\u8868"},{"location":"API_CN/#pmxrigidbody","title":"<code>PmxRigidBody</code>","text":"<p>PMX\u521a\u4f53\u6570\u636e\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>name_jp</code> <code>str</code> \u65e5\u6587\u540d\u79f0 <code>name_en</code> <code>str</code> \u82f1\u6587\u540d\u79f0 <code>bone_index</code> <code>int</code> \u5173\u8054\u9aa8\u9abc\u7d22\u5f15 <code>group</code> <code>int</code> \u78b0\u649e\u7ec4 <code>nocollide_groups</code> <code>List[int]</code> \u975e\u78b0\u649e\u7ec4\u5217\u8868 <code>shape</code> <code>RigidBodyShape</code> \u5f62\u72b6\u7c7b\u578b <code>size</code> <code>List[float]</code> \u5c3a\u5bf8 [x, y, z] <code>position</code> <code>List[float]</code> \u4f4d\u7f6e [x, y, z] <code>rotation</code> <code>List[float]</code> \u65cb\u8f6c [x, y, z] <code>physics_mode</code> <code>RigidBodyPhysMode</code> \u7269\u7406\u6a21\u5f0f <code>mass</code> <code>float</code> \u8d28\u91cf <code>move_damping</code> <code>float</code> \u79fb\u52a8\u8870\u51cf <code>rotation_damping</code> <code>float</code> \u65cb\u8f6c\u8870\u51cf <code>repulsion</code> <code>float</code> \u53cd\u5f39\u529b <code>friction</code> <code>float</code> \u6469\u64e6\u529b"},{"location":"API_CN/#pmxjoint","title":"<code>PmxJoint</code>","text":"<p>PMX\u5173\u8282\u6570\u636e\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>name_jp</code> <code>str</code> \u65e5\u6587\u540d\u79f0 <code>name_en</code> <code>str</code> \u82f1\u6587\u540d\u79f0 <code>joint_type</code> <code>JointType</code> \u5173\u8282\u7c7b\u578b <code>rigidbody1_index</code> <code>int</code> \u521a\u4f531\u7d22\u5f15 <code>rigidbody2_index</code> <code>int</code> \u521a\u4f532\u7d22\u5f15 <code>position</code> <code>List[float]</code> \u4f4d\u7f6e <code>rotation</code> <code>List[float]</code> \u65cb\u8f6c <code>position_min</code> <code>List[float]</code> \u4f4d\u7f6e\u6700\u5c0f\u503c <code>position_max</code> <code>List[float]</code> \u4f4d\u7f6e\u6700\u5927\u503c <code>rotation_min</code> <code>List[float]</code> \u65cb\u8f6c\u6700\u5c0f\u503c <code>rotation_max</code> <code>List[float]</code> \u65cb\u8f6c\u6700\u5927\u503c <code>position_spring</code> <code>List[float]</code> \u4f4d\u7f6e\u5f39\u7c27 <code>rotation_spring</code> <code>List[float]</code> \u65cb\u8f6c\u5f39\u7c27"},{"location":"API_CN/#vpd\u6a21\u578b","title":"VPD\u6a21\u578b","text":"<p>VPD (Vocaloid Pose Data) \u7528\u4e8e\u5b58\u50a8\u5355\u5e27\u59ff\u52bf\u6570\u636e\u3002</p>"},{"location":"API_CN/#vpdpose","title":"<code>VpdPose</code>","text":"<p>VPD\u59ff\u52bf\u4e3b\u7c7b\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>model_name</code> <code>str</code> \u6a21\u578b\u540d\u79f0 <code>bone_poses</code> <code>List[VpdBonePose]</code> \u9aa8\u9abc\u59ff\u52bf\u5217\u8868 <code>morph_poses</code> <code>List[VpdMorphPose]</code> \u53d8\u5f62\u59ff\u52bf\u5217\u8868 <p>\u65b9\u6cd5:</p> <pre><code>pose.get_bone_count() -&gt; int     # \u83b7\u53d6\u9aa8\u9abc\u59ff\u52bf\u6570\npose.get_morph_count() -&gt; int    # \u83b7\u53d6\u53d8\u5f62\u59ff\u52bf\u6570\npose.validate()                  # \u9a8c\u8bc1\u6570\u636e\u6709\u6548\u6027\n</code></pre>"},{"location":"API_CN/#vpdbonepose","title":"<code>VpdBonePose</code>","text":"<p>VPD\u9aa8\u9abc\u59ff\u52bf\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>bone_name</code> <code>str</code> \u9aa8\u9abc\u540d\u79f0 <code>position</code> <code>List[float]</code> \u4f4d\u7f6e [x, y, z] <code>rotation</code> <code>List[float]</code> \u65cb\u8f6c\u56db\u5143\u6570 [x, y, z, w] <pre><code>bone_pose = VpdBonePose(\n    bone_name=\"\u30bb\u30f3\u30bf\u30fc\",\n    position=[0.0, 10.0, 0.0],\n    rotation=[0.0, 0.0, 0.0, 1.0]\n)\n</code></pre>"},{"location":"API_CN/#vpdmorphpose","title":"<code>VpdMorphPose</code>","text":"<p>VPD\u53d8\u5f62\u59ff\u52bf\u3002</p> <p>\u5c5e\u6027:</p> \u5c5e\u6027 \u7c7b\u578b \u8bf4\u660e <code>morph_name</code> <code>str</code> \u53d8\u5f62\u540d\u79f0 <code>weight</code> <code>float</code> \u6743\u91cd\u503c (0.0-1.0) <pre><code>morph_pose = VpdMorphPose(\n    morph_name=\"\u7b11\u9854\",\n    weight=0.8\n)\n</code></pre>"},{"location":"API_CN/#\u89e3\u6790\u5668","title":"\u89e3\u6790\u5668","text":"<p>\u5982\u679c\u9700\u8981\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u89e3\u6790\u5668\u7c7b\u3002</p> <p>\u89e3\u6790\u5668\u4f1a\u5728\u53ef\u7528\u65f6\u81ea\u52a8\u4f7f\u7528 Cython \u5feb\u901f\u8def\u5f84\uff0c\u5426\u5219\u56de\u9000\u5230\u7eaf Python \u5b9e\u73b0\u3002</p>"},{"location":"API_CN/#vmdparser","title":"<code>VmdParser</code>","text":"<p>VMD\u6587\u4ef6\u89e3\u6790\u5668\u3002</p> <pre><code>from pypmxvmd.common.parsers.vmd_parser import VmdParser\n\nparser = VmdParser(progress_callback=lambda p: print(f\"{p*100:.1f}%\"))\nmotion = parser.parse_file(\"motion.vmd\", more_info=True)\nparser.write_file(motion, \"output.vmd\")\n</code></pre>"},{"location":"API_CN/#pmxparser","title":"<code>PmxParser</code>","text":"<p>PMX\u6587\u4ef6\u89e3\u6790\u5668\u3002</p> <pre><code>from pypmxvmd.common.parsers.pmx_parser import PmxParser\n\nparser = PmxParser(progress_callback=lambda p: print(f\"{p*100:.1f}%\"))\nmodel = parser.parse_file(\"model.pmx\", more_info=True)\nparser.write_file(model, \"output.pmx\")\n</code></pre>"},{"location":"API_CN/#vpdparser","title":"<code>VpdParser</code>","text":"<p>VPD\u6587\u4ef6\u89e3\u6790\u5668\u3002</p> <pre><code>from pypmxvmd.common.parsers.vpd_parser import VpdParser\n\nparser = VpdParser(progress_callback=lambda p: print(f\"{p*100:.1f}%\"))\npose = parser.parse_file(\"pose.vpd\", more_info=True)\nparser.write_file(pose, \"output.vpd\")\n</code></pre>"},{"location":"API_CN/#\u679a\u4e3e\u7c7b\u578b","title":"\u679a\u4e3e\u7c7b\u578b","text":""},{"location":"API_CN/#vmd","title":"VMD\u679a\u4e3e","text":""},{"location":"API_CN/#shadowmode","title":"<code>ShadowMode</code>","text":"<p>\u9634\u5f71\u6a21\u5f0f\u3002</p> \u503c \u8bf4\u660e <code>OFF</code> (0) \u5173\u95ed <code>MODE1</code> (1) \u6a21\u5f0f1 <code>MODE2</code> (2) \u6a21\u5f0f2"},{"location":"API_CN/#pmx","title":"PMX\u679a\u4e3e","text":""},{"location":"API_CN/#weightmode","title":"<code>WeightMode</code>","text":"<p>\u9876\u70b9\u6743\u91cd\u6a21\u5f0f\u3002</p> \u503c \u8bf4\u660e <code>BDEF1</code> (0) \u5355\u9aa8\u9abc\u53d8\u5f62 <code>BDEF2</code> (1) \u53cc\u9aa8\u9abc\u53d8\u5f62 <code>BDEF4</code> (2) \u56db\u9aa8\u9abc\u53d8\u5f62 <code>SDEF</code> (3) \u7403\u9762\u53d8\u5f62 <code>QDEF</code> (4) \u56db\u5143\u6570\u53d8\u5f62"},{"location":"API_CN/#sphmode","title":"<code>SphMode</code>","text":"<p>\u7403\u9762\u7eb9\u7406\u6a21\u5f0f\u3002</p> \u503c \u8bf4\u660e <code>DISABLED</code> (0) \u7981\u7528 <code>MULTIPLY</code> (1) \u4e58\u7b97 <code>ADDITIVE</code> (2) \u52a0\u7b97 <code>SUBTEX</code> (3) \u5b50\u7eb9\u7406"},{"location":"API_CN/#morphtype","title":"<code>MorphType</code>","text":"<p>\u53d8\u5f62\u7c7b\u578b\u3002</p> \u503c \u8bf4\u660e <code>GROUP</code> (0) \u7ec4\u53d8\u5f62 <code>VERTEX</code> (1) \u9876\u70b9\u53d8\u5f62 <code>BONE</code> (2) \u9aa8\u9abc\u53d8\u5f62 <code>UV</code> (3) UV\u53d8\u5f62 <code>EXTENDED_UV1</code> (4) \u6269\u5c55UV1\u53d8\u5f62 <code>EXTENDED_UV2</code> (5) \u6269\u5c55UV2\u53d8\u5f62 <code>EXTENDED_UV3</code> (6) \u6269\u5c55UV3\u53d8\u5f62 <code>EXTENDED_UV4</code> (7) \u6269\u5c55UV4\u53d8\u5f62 <code>MATERIAL</code> (8) \u6750\u8d28\u53d8\u5f62 <code>FLIP</code> (9) \u7ffb\u8f6c\u53d8\u5f62 <code>IMPULSE</code> (10) \u51b2\u51fb\u53d8\u5f62"},{"location":"API_CN/#morphpanel","title":"<code>MorphPanel</code>","text":"<p>\u53d8\u5f62\u9762\u677f\u4f4d\u7f6e\u3002</p> \u503c \u8bf4\u660e <code>HIDDEN</code> (0) \u9690\u85cf <code>EYEBROW</code> (1) \u7709\u6bdb (\u5de6\u4e0b) <code>EYE</code> (2) \u773c\u775b (\u5de6\u4e0a) <code>MOUTH</code> (3) \u5634\u5df4 (\u53f3\u4e0a) <code>OTHER</code> (4) \u5176\u4ed6 (\u53f3\u4e0b)"},{"location":"API_CN/#rigidbodyshape","title":"<code>RigidBodyShape</code>","text":"<p>\u521a\u4f53\u5f62\u72b6\u3002</p> \u503c \u8bf4\u660e <code>SPHERE</code> (0) \u7403\u4f53 <code>BOX</code> (1) \u76d2\u5b50 <code>CAPSULE</code> (2) \u80f6\u56ca"},{"location":"API_CN/#rigidbodyphysmode","title":"<code>RigidBodyPhysMode</code>","text":"<p>\u521a\u4f53\u7269\u7406\u6a21\u5f0f\u3002</p> \u503c \u8bf4\u660e <code>BONE</code> (0) \u9aa8\u9abc\u8ddf\u968f <code>PHYSICS</code> (1) \u7269\u7406\u6f14\u7b97 <code>PHYSICS_BONE</code> (2) \u7269\u7406\u6f14\u7b97+\u9aa8\u9abc\u8ffd\u968f"},{"location":"API_CN/#jointtype","title":"<code>JointType</code>","text":"<p>\u5173\u8282\u7c7b\u578b\u3002</p> \u503c \u8bf4\u660e <code>SPRING6DOF</code> (0) 6DOF\u5f39\u7c27\u5173\u8282"},{"location":"API_CN/#\u4f7f\u7528\u793a\u4f8b","title":"\u4f7f\u7528\u793a\u4f8b","text":""},{"location":"API_CN/#1-vmd","title":"\u793a\u4f8b1: \u8bfb\u53d6VMD\u52a8\u4f5c\u5e76\u83b7\u53d6\u4fe1\u606f","text":"<pre><code>import pypmxvmd\n\n# \u52a0\u8f7dVMD\u6587\u4ef6\nmotion = pypmxvmd.load_vmd(\"dance.vmd\", more_info=True)\n\n# \u83b7\u53d6\u57fa\u672c\u4fe1\u606f\nprint(f\"\u7248\u672c: {motion.header.version}\")\nprint(f\"\u6a21\u578b\u540d: {motion.header.model_name}\")\nprint(f\"\u9aa8\u9abc\u5e27\u6570: {motion.get_bone_frame_count()}\")\nprint(f\"\u53d8\u5f62\u5e27\u6570: {motion.get_morph_frame_count()}\")\n\n# \u904d\u5386\u9aa8\u9abc\u5e27\nfor frame in motion.bone_frames[:5]:\n    print(f\"\u9aa8\u9abc: {frame.bone_name}, \u5e27: {frame.frame_number}, \u4f4d\u7f6e: {frame.position}\")\n</code></pre>"},{"location":"API_CN/#2-pmx","title":"\u793a\u4f8b2: \u521b\u5efa\u7b80\u5355\u7684PMX\u6a21\u578b","text":"<pre><code>import pypmxvmd\nfrom pypmxvmd.common.models.pmx import PmxModel, PmxHeader, PmxVertex, PmxMaterial\n\n# \u521b\u5efa\u6a21\u578b\nmodel = PmxModel()\n\n# \u8bbe\u7f6e\u5934\u4fe1\u606f\nmodel.header = PmxHeader(\n    version=2.0,\n    name_jp=\"\u4e09\u89d2\u5f62\",\n    name_en=\"Triangle\"\n)\n\n# \u6dfb\u52a0\u9876\u70b9\nmodel.vertices = [\n    PmxVertex(position=[0.0, 0.0, 0.0], normal=[0.0, 0.0, 1.0], uv=[0.0, 0.0]),\n    PmxVertex(position=[1.0, 0.0, 0.0], normal=[0.0, 0.0, 1.0], uv=[1.0, 0.0]),\n    PmxVertex(position=[0.5, 1.0, 0.0], normal=[0.0, 0.0, 1.0], uv=[0.5, 1.0]),\n]\n\n# \u6dfb\u52a0\u9762\nmodel.faces = [[0, 1, 2]]\n\n# \u6dfb\u52a0\u6750\u8d28\nmodel.materials = [\n    PmxMaterial(\n        name_jp=\"\u6750\u8cea\",\n        name_en=\"Material\",\n        diffuse_color=[0.8, 0.8, 0.8, 1.0],\n        face_count=3\n    )\n]\n\n# \u4fdd\u5b58\npypmxvmd.save_pmx(model, \"triangle.pmx\")\n</code></pre>"},{"location":"API_CN/#3-vmd","title":"\u793a\u4f8b3: \u4fee\u6539VMD\u52a8\u4f5c","text":"<pre><code>import pypmxvmd\n\n# \u52a0\u8f7d\u52a8\u4f5c\nmotion = pypmxvmd.load_vmd(\"original.vmd\")\n\n# \u4fee\u6539\u6240\u6709\u9aa8\u9abc\u5e27\u7684\u4f4d\u7f6e - \u6574\u4f53\u62ac\u9ad810\u4e2a\u5355\u4f4d\nfor frame in motion.bone_frames:\n    frame.position[1] += 10.0\n\n# \u7f29\u653e\u6240\u6709\u53d8\u5f62\u6743\u91cd\u4e3a\u539f\u6765\u768450%\nfor frame in motion.morph_frames:\n    frame.weight *= 0.5\n\n# \u4fdd\u5b58\u4fee\u6539\u540e\u7684\u52a8\u4f5c\npypmxvmd.save_vmd(motion, \"modified.vmd\")\n</code></pre>"},{"location":"API_CN/#4-vpdvmd","title":"\u793a\u4f8b4: VPD\u59ff\u52bf\u8f6cVMD\u52a8\u4f5c","text":"<pre><code>import pypmxvmd\nfrom pypmxvmd.common.models.vmd import VmdMotion, VmdHeader, VmdBoneFrame, VmdMorphFrame\n\n# \u52a0\u8f7dVPD\u59ff\u52bf\npose = pypmxvmd.load_vpd(\"pose.vpd\")\n\n# \u521b\u5efaVMD\u52a8\u4f5c\nmotion = VmdMotion()\nmotion.header = VmdHeader(version=2, model_name=pose.model_name)\n\n# \u8f6c\u6362\u9aa8\u9abc\u59ff\u52bf\u4e3a\u9aa8\u9abc\u5e27\nfor bone_pose in pose.bone_poses:\n    # \u56db\u5143\u6570\u8f6c\u6b27\u62c9\u89d2 (\u7b80\u5316\u5904\u7406)\n    frame = VmdBoneFrame(\n        bone_name=bone_pose.bone_name,\n        frame_number=0,\n        position=bone_pose.position,\n        rotation=[0.0, 0.0, 0.0]  # \u9700\u8981\u5b9e\u9645\u8f6c\u6362\n    )\n    motion.bone_frames.append(frame)\n\n# \u8f6c\u6362\u53d8\u5f62\u59ff\u52bf\u4e3a\u53d8\u5f62\u5e27\nfor morph_pose in pose.morph_poses:\n    frame = VmdMorphFrame(\n        morph_name=morph_pose.morph_name,\n        frame_number=0,\n        weight=morph_pose.weight\n    )\n    motion.morph_frames.append(frame)\n\n# \u4fdd\u5b58\npypmxvmd.save_vmd(motion, \"pose_as_motion.vmd\")\n</code></pre>"},{"location":"API_CN/#5","title":"\u793a\u4f8b5: \u6570\u636e\u9a8c\u8bc1","text":"<pre><code>import pypmxvmd\n\n# \u52a0\u8f7d\u6a21\u578b\nmodel = pypmxvmd.load_pmx(\"model.pmx\")\n\n# \u9a8c\u8bc1\u6570\u636e\u5b8c\u6574\u6027\ntry:\n    model.validate()\n    print(\"\u6a21\u578b\u6570\u636e\u9a8c\u8bc1\u901a\u8fc7\")\nexcept AssertionError as e:\n    print(f\"\u6a21\u578b\u6570\u636e\u9a8c\u8bc1\u5931\u8d25: {e}\")\n</code></pre>"},{"location":"API_CN/#_6","title":"\u9519\u8bef\u5904\u7406","text":"<p>PyPMXVMD \u4f7f\u7528\u6807\u51c6Python\u5f02\u5e38\u8fdb\u884c\u9519\u8bef\u5904\u7406\uff1a</p> \u5f02\u5e38\u7c7b\u578b \u8bf4\u660e <code>FileNotFoundError</code> \u6587\u4ef6\u4e0d\u5b58\u5728 <code>ValueError</code> \u6587\u4ef6\u683c\u5f0f\u65e0\u6548\u6216\u6570\u636e\u9519\u8bef <code>IOError</code> \u6587\u4ef6\u8bfb\u5199\u9519\u8bef <code>AssertionError</code> \u6570\u636e\u9a8c\u8bc1\u5931\u8d25 <pre><code>import pypmxvmd\n\ntry:\n    model = pypmxvmd.load_pmx(\"nonexistent.pmx\")\nexcept FileNotFoundError:\n    print(\"\u6587\u4ef6\u4e0d\u5b58\u5728\")\nexcept ValueError as e:\n    print(f\"\u6587\u4ef6\u683c\u5f0f\u9519\u8bef: {e}\")\n</code></pre>"},{"location":"API_CN/#_7","title":"\u517c\u5bb9\u6027\u8bf4\u660e","text":"<ul> <li>VMD: \u652f\u6301\u65e7\u7248(v1)\u548c\u65b0\u7248(v2)\u683c\u5f0f</li> <li>PMX: \u652f\u63012.0\u548c2.1\u7248\u672c</li> <li>VPD: \u652f\u6301\u6807\u51c6VPD\u6587\u672c\u683c\u5f0f</li> <li>\u7f16\u7801: VMD\u4f7f\u7528Shift-JIS\uff0cPMX\u652f\u6301UTF-16LE\u548cUTF-8\uff0cVPD\u4f7f\u7528Shift-JIS</li> </ul>"},{"location":"API_CN/#_8","title":"\u8bb8\u53ef\u8bc1","text":"<p>MIT License</p>"}]}